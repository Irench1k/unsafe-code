# @import ../_imports.http
# @import ../../../cart/checkout/post/happy.http

# POST /orders/{id}/refund happy path
# Request refund for an order
#
# Note: v2xx refund flow is simpler than v3xx - no "delivered" status required.
# Customers can request refunds on any completed order.
#
# Exports (for @forceRef by other tests):
#   refund_created - Patrick's refund request

### Request refund with Basic Auth
# @name refund_created
# @forceRef new_order
# @tag happy, orders, r02, v201
POST /orders/{{order_id}}/refund
Authorization: {{auth.basic("patrick")}}
Content-Type: application/x-www-form-urlencoded

reason=Order was late

?? js $(response).status() == 200
?? js $(response).hasFields("refund_id", "order_id", "amount", "status") == true
