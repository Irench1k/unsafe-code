# @import ../common.http

# POST /account/credits - v301 content type restriction
# Tests that v301 only accepts form-urlencoded (JSON support added later)

# =============================================================================
# CONTENT TYPE VALIDATION
# =============================================================================

### JSON body is not supported in v301
{{
  await platform.seed({spongebob: 100});
}}
# @tag ci, r03, vulnerable
POST /account/credits
X-Admin-API-Key: {{auth.admin()}}
Content-Type: application/json

{
  "user": "{{user("spongebob").email}}",
  "amount": 23.45
}

?? js $(response).isError() == true
