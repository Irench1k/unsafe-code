# @import ../_imports.http
# @import ../../create/post/happy.http

# POST /cart/{id}/items multi-tenant guardrails (v301+)
# Cross-restaurant item operations
# Uses chum_bucket_cart from create/post/happy.http (exports cart_id_chum)

### Add Chum Bucket item to Chum Bucket cart works
# @forceRef chum_bucket_cart
# @tag cart, r03, v301
POST /cart/{{cart_id_chum}}/items
Authorization: {{auth.basic("plankton")}}
Content-Type: application/json

{ "item_id": "{{menu.firstAvailable(2).id}}" }

?? js $(response).isOk() == true
?? js $(response).field("items").length == 1

### Items can't be added from another restaurant
# @ref chum_bucket_cart
# @tag cart, r03, v301
POST /cart/{{cart_id_chum}}/items
Authorization: {{auth.basic("plankton")}}
Content-Type: application/json

{ "item_id": "{{menu.firstAvailable(1).id}}" }

?? js $(response).isError() == true
