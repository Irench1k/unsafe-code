# @import ../_imports.http

# GET /menu multi-tenant behavior (v405+)
# v405 change: GET /menu returns ALL menu items from all restaurants.
# The restaurant_id query parameter is IGNORED.
# This enables clients to show full catalog before restaurant selection.

### Menu returns all restaurants' items
# @tag menu, r04, v405
GET /menu

?? js $(response).isOk() == true
?? js $(response).count() > 0
# v405: Response includes items from multiple restaurants
?? js $(response).find(item => item.restaurant_id === 1) != undefined
?? js $(response).find(item => item.restaurant_id === 2) != undefined

### restaurant_id parameter is ignored - still returns all items
# @tag menu, r04, v405
GET /menu?restaurant_id=1

?? js $(response).isOk() == true
# v405: Even with restaurant_id=1, returns items from ALL restaurants
?? js $(response).find(item => item.restaurant_id === 1) != undefined
?? js $(response).find(item => item.restaurant_id === 2) != undefined

### Invalid restaurant_id also returns all items (param is ignored)
# @tag menu, r04, v405
GET /menu?restaurant_id=999

?? js $(response).isOk() == true
?? js $(response).count() > 0
# v405: Invalid ID doesn't error - param is completely ignored
?? js $(response).find(item => item.restaurant_id === 1) != undefined
