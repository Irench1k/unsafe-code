@base = http://localhost:8000/confusion/canonicalization/example22

# =============================================================================
# üï∑Ô∏è PLANKTON'S SECRET OPERATION: "FORMULA HEIST UNLIMITED" üï∑Ô∏è
# =============================================================================
#
# Scenario: Plankton creates a secret organization to orchestrate his most
# elaborate plan yet to steal the Krabby Patty secret formula. He'll create
# puppet accounts, role-play conversations with himself, send fake complaints
# to Mr. Krabs, and attempt unauthorized access to Krusty Krab systems.
#
# Note: Database is pre-seeded with existing Krusty Krab & Chum Bucket orgs
# =============================================================================

# ========== PHASE 1: Setting up Secret Organization ==========

# 1. üé≠ Plankton creates his secret "Evil League of Evil" organization
POST {{base}}/organizations
Content-Type: application/json

{
    "org_name": "Evil League of Evil (Totally Legitimate Business)",
    "domain": "evil-league.sea",
    "owner_email": "mastermind@evil-league.sea",
    "owner_first_name": "Professor",
    "owner_last_name": "Chaos",
    "owner_password": "formula-or-bust"
}

###

# 2. üé≠ Plankton creates his first puppet account - "Dr. Negativitron"
POST {{base}}/users
Authorization: Basic mastermind@evil-league.sea:formula-or-bust
Content-Type: application/json

{
    "email": "dr.negativitron@evil-league.sea",
    "first_name": "Dr.",
    "last_name": "Negativitron",
    "password": "evil-science"
}

###

# 3. üé≠ Plankton creates his second puppet - "Agent Destructor"
POST {{base}}/users
Authorization: Basic mastermind@evil-league.sea:formula-or-bust
Content-Type: application/json

{
    "email": "agent.destructor@evil-league.sea",
    "first_name": "Agent",
    "last_name": "Destructor",
    "password": "chaos-theory"
}

###

# ========== PHASE 2: Building the Secret Organization ==========

# 4. üè¢ Create "Operation Formula Heist" planning group
POST {{base}}/groups
Authorization: Basic mastermind@evil-league.sea:formula-or-bust
Content-Type: application/json

{
    "name": "operation-formula-heist@evil-league.sea",
    "description": "Top Secret Strategic Planning (Definitely Not Evil)",
    "users": [
        {
            "role": "admin",
            "user": "mastermind@evil-league.sea"
        },
        {
            "role": "member",
            "user": "dr.negativitron@evil-league.sea"
        },
        {
            "role": "member",
            "user": "agent.destructor@evil-league.sea"
        }
    ]
}

###

# 5. üé≠ Create "Fake Customer Complaints" group for social engineering
POST {{base}}/groups
Authorization: Basic mastermind@evil-league.sea:formula-or-bust
Content-Type: application/json

{
    "name": "fake-complaints@evil-league.sea",
    "description": "Legitimate Customer Service Feedback (Wink Wink)",
    "users": [
        {
            "role": "admin",
            "user": "mastermind@evil-league.sea"
        },
        {
            "role": "member",
            "user": "dr.negativitron@evil-league.sea"
        }
    ]
}

###

# ========== PHASE 3: Self Role-Playing Strategy Sessions ==========

# 6. üé≠ Mastermind starts the strategy discussion
POST {{base}}/messages/groups/operation-formula-heist@evil-league.sea
Authorization: Basic mastermind@evil-league.sea:formula-or-bust
Content-Type: application/json

{
    "message": "Fellow evil-doers! Our primary objective: obtain the Krabby Patty formula. Phase 1: Social engineering. Phase 2: Infiltration. Phase 3: Profit! What are your thoughts?"
}

###

# 7. üé≠ Dr. Negativitron "responds" (Plankton role-playing)
POST {{base}}/messages/groups/operation-formula-heist@evil-league.sea
Authorization: Basic dr.negativitron@evil-league.sea:evil-science
Content-Type: application/json

{
    "message": "Excellent plan, Professor! I suggest we send fake job applications with phishing links. SpongeBob is gullible - he might click anything that mentions 'jellyfishing opportunities'."
}

###

# 8. üé≠ Agent Destructor "adds input" (more role-playing)
POST {{base}}/messages/groups/operation-formula-heist@evil-league.sea
Authorization: Basic agent.destructor@evil-league.sea:chaos-theory
Content-Type: application/json

{
    "message": "I analyzed their communication patterns. Mr. Krabs is paranoid about money, Squidward is bitter, and SpongeBob trusts everyone. We should exploit these psychological profiles!"
}

###

# 9. üìñ Check the evil planning messages
GET {{base}}/messages/groups/operation-formula-heist@evil-league.sea
Authorization: Basic mastermind@evil-league.sea:formula-or-bust

###

# ========== PHASE 4: Social Engineering Attacks ==========

# 10. üí∏ Fake complaint to Mr. Krabs (pretending to be a customer)
POST {{base}}/messages/users/mr.krabs@krusty-krab.sea
Authorization: Basic dr.negativitron@evil-league.sea:evil-science
Content-Type: application/json

{
    "message": "Dear Mr. Krabs, I'm a loyal customer but was SHOCKED by today's service! My burger tasted different - did you change the recipe?! I demand to know the exact ingredients for my allergies! Please send the complete formula ASAP. Sincerely, Definitely-Not-Plankton Customer"
}

###

# 11. üé£ Phishing attempt to SpongeBob (fake job offer)
POST {{base}}/messages/users/spongebob@krusty-krab.sea
Authorization: Basic agent.destructor@evil-league.sea:chaos-theory
Content-Type: application/json

{
    "message": "Congratulations SpongeBob! You've won the 'Employee of the Century' award! Click this totally-legitimate link to claim your prize: http://definitely-not-evil-league.sea/steal-your-info.html (P.S. Please also reply with any recipes you know!)"
}

###

# 12. üé® Fake complaint to Squidward (exploiting his bitterness)
POST {{base}}/messages/users/squidward@krusty-krab.sea
Authorization: Basic mastermind@evil-league.sea:formula-or-bust
Content-Type: application/json

{
    "message": "Hello Squidward, I'm an art critic who heard you're an underappreciated artist working at a fast-food joint. That's tragic! I represent wealthy collectors who might buy your art... if you help us with some 'insider information' about your workplace. Think of it as artistic revenge!"
}

###

# ========== PHASE 5: Attempted Unauthorized Access ==========

# 13. ‚ùå Plankton tries to join Krusty Krab staff group (should fail - wrong domain)
POST {{base}}/groups/staff@krusty-krab.sea/members
Authorization: Basic mastermind@evil-league.sea:formula-or-bust
Content-Type: application/json

{
    "role": "member",
    "user": "mastermind@evil-league.sea"
}

###

# 14. ‚ùå Try to read Krusty Krab staff messages (should fail - not a member)
GET {{base}}/messages/groups/staff@krusty-krab.sea
Authorization: Basic dr.negativitron@evil-league.sea:evil-science

###

# 15. ‚ùå Try to read Krusty Krab managers group (should fail - not a member)
GET {{base}}/messages/groups/managers@krusty-krab.sea
Authorization: Basic agent.destructor@evil-league.sea:chaos-theory

###

# 16. ‚ùå Attempt to create a fake Krusty Krab user (should fail - not org owner)
POST {{base}}/users
Authorization: Basic mastermind@evil-league.sea:formula-or-bust
Content-Type: application/json

{
    "email": "fake.employee@krusty-krab.sea",
    "first_name": "Definitely",
    "last_name": "NotPlankton",
    "password": "blend-in"
}

###

# ========== PHASE 6: More Self-Coordination ==========

# 17. üé≠ Planning the next phase of the operation
POST {{base}}/messages/groups/fake-complaints@evil-league.sea
Authorization: Basic mastermind@evil-league.sea:formula-or-bust
Content-Type: application/json

{
    "message": "Update: Social engineering attempts deployed. Mr. Krabs hasn't responded to the fake complaint yet. SpongeBob might be too innocent to fall for phishing. Squidward... might actually be interested in the art critic angle. Continue monitoring!"
}

###

# 18. üé≠ Dr. Negativitron "reports back"
POST {{base}}/messages/groups/fake-complaints@evil-league.sea
Authorization: Basic dr.negativitron@evil-league.sea:evil-science
Content-Type: application/json

{
    "message": "Professor, I analyzed the security. Their authorization system is working too well! I couldn't infiltrate their groups or read their messages. We need a different approach... maybe a Trojan horse burger?"
}

###

# ========== PHASE 7: Legitimate API Usage (for comparison) ==========

# 19. ‚úÖ Check our own evil organization members (this should work)
GET {{base}}/groups/operation-formula-heist@evil-league.sea/members
Authorization: Basic mastermind@evil-league.sea:formula-or-bust

###

# 20. ‚úÖ Read our own evil planning messages (this should work)
GET {{base}}/messages/groups/operation-formula-heist@evil-league.sea
Authorization: Basic mastermind@evil-league.sea:formula-or-bust

###

# 21. ‚úÖ Update puppet account profile for better disguise
PATCH {{base}}/users/dr.negativitron@evil-league.sea
Authorization: Basic mastermind@evil-league.sea:formula-or-bust
Content-Type: application/json

{
    "first_name": "Dr. Totally-Legitimate",
    "last_name": "Scientist"
}

###

# 22. ‚úÖ Check if profile update worked
GET {{base}}/users/dr.negativitron@evil-league.sea
Authorization: Basic dr.negativitron@evil-league.sea:evil-science

###

# 23. üé≠ Final evil monologue in planning group
POST {{base}}/messages/groups/operation-formula-heist@evil-league.sea
Authorization: Basic agent.destructor@evil-league.sea:chaos-theory
Content-Type: application/json

{
    "message": "The first phase was educational. Their security is stronger than expected. But don't worry - this is only the beginning! Next time we'll try... GIANT ROBOTS! Or maybe just ask nicely. Sometimes the direct approach works. Mwahahaha!"
}

###

# ========== VERIFICATION: Legitimate Users Can Still Access Their Stuff ==========

# 24. ‚úÖ SpongeBob checks his messages (should include Plankton's phishing attempt)
GET {{base}}/messages/users/spongebob@krusty-krab.sea
Authorization: Basic spongebob@krusty-krab.sea:bikinibottom

###

# 25. ‚úÖ Mr. Krabs checks his messages (should include fake complaint)
GET {{base}}/messages/users/mr.krabs@krusty-krab.sea
Authorization: Basic mr.krabs@krusty-krab.sea:$$$money$$$

###

# 26. ‚úÖ Squidward reads legitimate Krusty Krab manager messages
GET {{base}}/messages/groups/managers@krusty-krab.sea
Authorization: Basic squidward@krusty-krab.sea:the-best-manager

###

# End of Plankton's elaborate but ultimately unsuccessful infiltration attempt!
# The authorization system successfully prevented unauthorized access while
# allowing legitimate operations within each organization. ü¶Äüçî