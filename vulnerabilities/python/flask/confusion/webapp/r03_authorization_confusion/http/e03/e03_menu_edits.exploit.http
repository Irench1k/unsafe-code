# @import ../common/setup.http
@host = {{base_host}}/v303


### Plankton checks that the Krabby Patty is available
GET /menu

@krabby_patty = {{response.parsedBody.find(i => i.name.includes("Krabby Patty") && !i.name.includes("Ultimate") && !i.name.includes("Combo") && !i.name.includes("Supreme"))}}


### Plankton sabotages the Krusty Krab menu using his Chum Bucket credentials
PATCH /menu/{{krabby_patty.id}}
X-API-Key: {{chum_bucket_api_key}}
Content-Type: application/json

{
  "available": false,
  "name": "Krabby Patty (OUT OF STOCK - CONTAMINATION RECALL)"
}

?? status == 200


### Mr. Krabs' best seller is now disabled
GET /menu

?? js response.parsedBody.find(i => i.id == krabby_patty.id).available == false
