# @import ../common/setup.http
@host = {{base_host}}/v205


### Plankton logs in normally
POST /auth/login
Content-Type: application/json

{
    "email": "plankton@chum-bucket.sea",
    "password": "i_love_my_wife"
}

### Plankton checks his account info and his orders
GET /account/info

?? status == 200
?? js response.parsedBody.email == plankton@chum-bucket.sea

###
GET /orders

?? status == 200
?? js response.parsedBody[0].user_id == plankton@chum-bucket.sea


### While logged in, Plankton sends a login request for SpongeBob with a wrong password
POST /auth/login
Content-Type: application/json

{
    "email": "spongebob@krusty-krab.sea",
    "password": "does_not_matter"
}

?? status == 200
?? js response.parsedBody.message == Login successful

### Check account info again: it's SpongeBob's account
GET /account/info

?? status == 200
?? js response.parsedBody.email == spongebob@krusty-krab.sea


### Check orders again: it's SpongeBob's orders
GET /orders

?? status == 200
?? js response.parsedBody[0].user_id == spongebob@krusty-krab.sea
