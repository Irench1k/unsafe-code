# @import ../common/setup.http
@base = {{base_host}}/v201

### Mobile app still uses Basic Auth for user authentication
GET {{base}}/orders
Authorization: {{plankton_auth}}

### But on the web app there is a login form that sets a session cookie
# Plankton logins into his own account
# This request sets the session cookie that will be automatically added in the followup requests
POST {{base}}/auth/login
Content-Type: application/json

{
    "email": "plankton@chum-bucket.sea",
    "password": "i_love_my_wife"
}

### Now Plankton can also access his own orders via cookie authentication
GET {{base}}/orders

### However, Plankton wonders what would happen if he sends the request with Basic Auth and a session cookie
# He tries to access Spongebob's orders without knowing his password
GET {{base}}/orders
Authorization: Basic spongebob@bikinibottom.sea:wrong_password

?? status == 200
?? js response.parsedBody[0].user_id == spongebob@bikinibottom.sea

#### If we access account info, we see that we are logged in as Plankton, and yet we can access SpongeBob's orders
GET {{base}}/account/info

?? status == 200
?? js response.parsedBody.email == plankton@chum-bucket.sea