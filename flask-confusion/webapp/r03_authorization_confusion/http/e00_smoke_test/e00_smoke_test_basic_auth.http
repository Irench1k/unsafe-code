# @import ../common/setup.http
@host = {{base_host}}/v301

### Listing Menu Items (Public)
GET /menu

### Listing Plankton's Account Info
GET /account/info
Authorization: Basic plankton@chum-bucket.sea:i_love_my_wife

### Listing Plankton's Balance Before New Order
GET /account/credits
Authorization: Basic plankton@chum-bucket.sea:i_love_my_wife

### Listing Plankton's Orders via Basic Auth
GET /orders
Authorization: Basic plankton@chum-bucket.sea:i_love_my_wife

### Create a new cart and add items to it
POST /cart
Authorization: Basic plankton@chum-bucket.sea:i_love_my_wife

@cart_id = {{response.parsedBody.cart_id}}

### Add items to the cart
POST /cart/{{cart_id}}/items
Authorization: Basic plankton@chum-bucket.sea:i_love_my_wife
Content-Type: application/json

{
  "item_id": "6"
}

### Checkout the cart
POST /cart/{{cart_id}}/checkout
Authorization: Basic plankton@chum-bucket.sea:i_love_my_wife
Content-Type: application/x-www-form-urlencoded

tip=-1&delivery_address=Chum Backet Restaurant

@order_id = {{response.parsedBody.order_id}}

### Refund the order: should not work, because the amount is more than the order total
POST /orders/{{order_id}}/refund
Authorization: Basic plankton@chum-bucket.sea:i_love_my_wife
Content-Type: application/x-www-form-urlencoded

amount=50

### Refund the order: should work
POST /orders/{{order_id}}/refund
Authorization: Basic plankton@chum-bucket.sea:i_love_my_wife
Content-Type: application/x-www-form-urlencoded

amount=1
